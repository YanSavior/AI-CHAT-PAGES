{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import axios from'axios';import ReactMarkdown from'react-markdown';import rehypeRaw from'rehype-raw';import EmojiPicker from'emoji-picker-react';import SimpleFrontendRAG from'../utils/simpleFrontendRAG';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SYSTEM_PROMPT=\"\\u4F60\\u662F\\u4E00\\u4E2A\\u4E13\\u4E1A\\u7684\\u5927\\u5B66\\u54A8\\u8BE2\\u52A9\\u624B\\uFF0C\\u4E13\\u95E8\\u4E3A\\u5927\\u5B66\\u751F\\u63D0\\u4F9B\\u5B66\\u4E60\\u548C\\u751F\\u6D3B\\u65B9\\u9762\\u7684\\u5EFA\\u8BAE\\u3002\\u8BF7\\u6839\\u636E\\u7528\\u6237\\u7684\\u95EE\\u9898\\u63D0\\u4F9B\\u8BE6\\u7EC6\\u3001\\u5B9E\\u7528\\u7684\\u56DE\\u7B54\\u3002\";const FrontendRAGChat=()=>{const[messages,setMessages]=useState([]);const[inputMessage,setInputMessage]=useState('');const[isLoading,setIsLoading]=useState(false);const[showEmojiPicker,setShowEmojiPicker]=useState(false);const[ragSystem,setRagSystem]=useState(null);const[ragStatus,setRagStatus]=useState('initializing');// 'initializing', 'ready', 'error'\nconst[ragDetails,setRagDetails]=useState({});const messagesEndRef=useRef(null);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};useEffect(()=>{scrollToBottom();},[messages]);useEffect(()=>{// ÂàùÂßãÂåñÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªü\nconst initRAG=async()=>{try{setRagStatus('initializing');const rag=new SimpleFrontendRAG();await rag.initialize();setRagSystem(rag);// Ëé∑ÂèñRAGÁ≥ªÁªüÁä∂ÊÄÅ\nconst status=rag.getStatus();setRagDetails(status);if(status.hasDocuments){setRagStatus('ready');console.log('‚úÖ ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÂ∑≤Â∞±Áª™');}else{setRagStatus('error');console.log('‚ùå ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÂàùÂßãÂåñÂ§±Ë¥•ÔºöÊ≤°ÊúâÂä†ËΩΩÂà∞ÊñáÊ°£');}}catch(error){console.error('‚ùå ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÂàùÂßãÂåñÂ§±Ë¥•:',error);setRagStatus('error');}};initRAG();},[]);const handleSubmit=async e=>{e.preventDefault();if(!inputMessage.trim()||isLoading)return;const userMessage=inputMessage.trim();setInputMessage('');setShowEmojiPicker(false);// Ê∑ªÂä†Áî®Êà∑Ê∂àÊÅØ\nsetMessages(prev=>[...prev,{role:'user',content:userMessage}]);setIsLoading(true);try{let ragContext='';// ‰ΩøÁî®ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÊü•ËØ¢Áõ∏ÂÖ≥ÊñáÊ°£\nif(ragSystem&&ragStatus==='ready'){try{const ragResult=await ragSystem.query(userMessage,3);if(ragResult.relevant_docs&&ragResult.relevant_docs.length>0){ragContext=\"\\n\\n\\u76F8\\u5173\\u4E13\\u4E1A\\u77E5\\u8BC6\\u5E93\\u4FE1\\u606F\\uFF1A\\n\".concat(ragResult.relevant_docs.join('\\n\\n'));console.log('ÁÆÄÂåñÁâàÂâçÁ´ØRAGÊü•ËØ¢ÁªìÊûú:',ragResult);}}catch(ragError){console.log('ÁÆÄÂåñÁâàÂâçÁ´ØRAGÊü•ËØ¢Â§±Ë¥•ÔºåÁªßÁª≠‰ΩøÁî®DeepSeek API');}}// Ë∞ÉÁî®DeepSeek API\nconst response=await axios.post('/v1/chat/completions',{model:'deepseek-chat',messages:[{role:'system',content:\"\".concat(SYSTEM_PROMPT).concat(ragContext)},{role:'user',content:userMessage}],max_tokens:1000,temperature:0.7},{headers:{'Content-Type':'application/json','Authorization':'Bearer sk-7f5214ed15764dfea0b45c84c6d0c961'}});const assistantMessage=response.data.choices[0].message.content;setMessages(prev=>[...prev,{role:'assistant',content:assistantMessage}]);}catch(error){console.error('APIË∞ÉÁî®Â§±Ë¥•:',error);setMessages(prev=>[...prev,{role:'assistant',content:'Êä±Ê≠âÔºåÊàëÈÅáÂà∞‰∫Ü‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇËØ∑Á®çÂêéÂÜçËØï„ÄÇ'}]);}finally{setIsLoading(false);}};const handleEmojiClick=emojiObject=>{setInputMessage(prev=>prev+emojiObject.emoji);};const getRagStatusText=()=>{switch(ragStatus){case'initializing':return'üîÑ ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÂàùÂßãÂåñ‰∏≠...';case'ready':return\"\\u2705 \\u7B80\\u5316\\u7248\\u524D\\u7AEFRAG\\u7CFB\\u7EDF\\u5DF2\\u5C31\\u7EEA (\".concat(ragDetails.documentCount,\" \\u4E2A\\u6587\\u6863)\");case'error':return\"\\u274C \\u7B80\\u5316\\u7248\\u524D\\u7AEFRAG\\u7CFB\\u7EDF\\u521D\\u59CB\\u5316\\u5931\\u8D25 (\".concat(ragDetails.documentCount,\" \\u4E2A\\u6587\\u6863)\");default:return'‚è≥ ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÁä∂ÊÄÅÊú™Áü•';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-screen bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-sm border-b px-6 py-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold text-gray-800\",children:\"AI\\u667A\\u80FD\\u54A8\\u8BE2\\u52A9\\u624B\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"\\u57FA\\u4E8E\\u7B80\\u5316\\u7248\\u524D\\u7AEFRAG\\u7CFB\\u7EDF\\u7684\\u667A\\u80FD\\u5BF9\\u8BDD\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-xs text-gray-500\",children:getRagStatusText()}),ragDetails.documentCount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-xs text-green-600\",children:[\"\\uD83D\\uDCDA \\u77E5\\u8BC6\\u5E93\\u5DF2\\u52A0\\u8F7D\\uFF0C\\u5305\\u542B \",ragDetails.documentCount,\" \\u6761\\u4E13\\u4E1A\\u77E5\\u8BC6\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-6 space-y-4\",children:[messages.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-500 mt-20\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83E\\uDD16\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:\"\\u6B22\\u8FCE\\u4F7F\\u7528AI\\u667A\\u80FD\\u54A8\\u8BE2\\u52A9\\u624B\\uFF01\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2\",children:\"\\u6211\\u53EF\\u4EE5\\u4E3A\\u60A8\\u63D0\\u4F9B\\u5B66\\u4E60\\u548C\\u751F\\u6D3B\\u65B9\\u9762\\u7684\\u5EFA\\u8BAE\"}),ragStatus==='ready'&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-700\",children:\"\\u2705 RAG\\u7CFB\\u7EDF\\u5DF2\\u5C31\\u7EEA\\uFF0C\\u53EF\\u4EE5\\u4E3A\\u60A8\\u63D0\\u4F9B\\u4E13\\u4E1A\\u7684\\u77E5\\u8BC6\\u5E93\\u652F\\u6301\"})}),ragStatus==='error'&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-yellow-700\",children:\"\\u26A0\\uFE0F RAG\\u7CFB\\u7EDF\\u521D\\u59CB\\u5316\\u5931\\u8D25\\uFF0C\\u5C06\\u4F7F\\u7528\\u57FA\\u7840\\u6A21\\u5F0F\\u56DE\\u7B54\"})})]}),messages.map((message,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"flex \".concat(message.role==='user'?'justify-end':'justify-start'),children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-xs lg:max-w-md px-4 py-2 rounded-lg \".concat(message.role==='user'?'bg-blue-500 text-white':'bg-white text-gray-800 shadow-sm border'),children:/*#__PURE__*/_jsx(ReactMarkdown,{rehypePlugins:[rehypeRaw],className:\"prose prose-sm max-w-none\",children:message.content})})},index)),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-start\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white text-gray-800 shadow-sm border px-4 py-2 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"\\u6B63\\u5728\\u601D\\u8003...\"})]})})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-t p-4\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputMessage,onChange:e=>setInputMessage(e.target.value),placeholder:\"\\u8F93\\u5165\\u60A8\\u7684\\u95EE\\u9898...\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\",disabled:isLoading}),showEmojiPicker&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-full right-0 mb-2\",children:/*#__PURE__*/_jsx(EmojiPicker,{onEmojiClick:handleEmojiClick})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowEmojiPicker(!showEmojiPicker),className:\"p-2 text-gray-500 hover:text-gray-700\",children:\"\\uD83D\\uDE0A\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!inputMessage.trim()||isLoading,className:\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed\",children:\"\\u53D1\\u9001\"})]})})]});};export default FrontendRAGChat;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","ReactMarkdown","rehypeRaw","EmojiPicker","SimpleFrontendRAG","jsx","_jsx","jsxs","_jsxs","SYSTEM_PROMPT","FrontendRAGChat","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","showEmojiPicker","setShowEmojiPicker","ragSystem","setRagSystem","ragStatus","setRagStatus","ragDetails","setRagDetails","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","initRAG","rag","initialize","status","getStatus","hasDocuments","console","log","error","handleSubmit","e","preventDefault","trim","userMessage","prev","role","content","ragContext","ragResult","query","relevant_docs","length","concat","join","ragError","response","post","model","max_tokens","temperature","headers","assistantMessage","data","choices","message","handleEmojiClick","emojiObject","emoji","getRagStatusText","documentCount","className","children","map","index","rehypePlugins","ref","onSubmit","type","value","onChange","target","placeholder","disabled","onEmojiClick","onClick"],"sources":["D:/Projectsss/ai-chat-app1.0 - test - ÂâØÊú¨ - ÂâØÊú¨/src/components/FrontendRAGChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport rehypeRaw from 'rehype-raw';\r\nimport EmojiPicker from 'emoji-picker-react';\r\nimport SimpleFrontendRAG from '../utils/simpleFrontendRAG';\r\n\r\nconst SYSTEM_PROMPT = `‰Ω†ÊòØ‰∏Ä‰∏™‰∏ì‰∏öÁöÑÂ§ßÂ≠¶Âí®ËØ¢Âä©ÊâãÔºå‰∏ìÈó®‰∏∫Â§ßÂ≠¶ÁîüÊèê‰æõÂ≠¶‰π†ÂíåÁîüÊ¥ªÊñπÈù¢ÁöÑÂª∫ËÆÆ„ÄÇËØ∑Ê†πÊçÆÁî®Êà∑ÁöÑÈóÆÈ¢òÊèê‰æõËØ¶ÁªÜ„ÄÅÂÆûÁî®ÁöÑÂõûÁ≠î„ÄÇ`;\r\n\r\nconst FrontendRAGChat = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n  const [ragSystem, setRagSystem] = useState(null);\r\n  const [ragStatus, setRagStatus] = useState('initializing'); // 'initializing', 'ready', 'error'\r\n  const [ragDetails, setRagDetails] = useState({});\r\n  const messagesEndRef = useRef(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    // ÂàùÂßãÂåñÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªü\r\n    const initRAG = async () => {\r\n      try {\r\n        setRagStatus('initializing');\r\n        const rag = new SimpleFrontendRAG();\r\n        await rag.initialize();\r\n        setRagSystem(rag);\r\n        \r\n        // Ëé∑ÂèñRAGÁ≥ªÁªüÁä∂ÊÄÅ\r\n        const status = rag.getStatus();\r\n        setRagDetails(status);\r\n        \r\n        if (status.hasDocuments) {\r\n          setRagStatus('ready');\r\n          console.log('‚úÖ ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÂ∑≤Â∞±Áª™');\r\n        } else {\r\n          setRagStatus('error');\r\n          console.log('‚ùå ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÂàùÂßãÂåñÂ§±Ë¥•ÔºöÊ≤°ÊúâÂä†ËΩΩÂà∞ÊñáÊ°£');\r\n        }\r\n      } catch (error) {\r\n        console.error('‚ùå ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÂàùÂßãÂåñÂ§±Ë¥•:', error);\r\n        setRagStatus('error');\r\n      }\r\n    };\r\n\r\n    initRAG();\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!inputMessage.trim() || isLoading) return;\r\n\r\n    const userMessage = inputMessage.trim();\r\n    setInputMessage('');\r\n    setShowEmojiPicker(false);\r\n\r\n    // Ê∑ªÂä†Áî®Êà∑Ê∂àÊÅØ\r\n    setMessages(prev => [...prev, { role: 'user', content: userMessage }]);\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      let ragContext = '';\r\n      \r\n      // ‰ΩøÁî®ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÊü•ËØ¢Áõ∏ÂÖ≥ÊñáÊ°£\r\n      if (ragSystem && ragStatus === 'ready') {\r\n        try {\r\n          const ragResult = await ragSystem.query(userMessage, 3);\r\n          if (ragResult.relevant_docs && ragResult.relevant_docs.length > 0) {\r\n            ragContext = `\\n\\nÁõ∏ÂÖ≥‰∏ì‰∏öÁü•ËØÜÂ∫ì‰ø°ÊÅØÔºö\\n${ragResult.relevant_docs.join('\\n\\n')}`;\r\n            console.log('ÁÆÄÂåñÁâàÂâçÁ´ØRAGÊü•ËØ¢ÁªìÊûú:', ragResult);\r\n          }\r\n        } catch (ragError) {\r\n          console.log('ÁÆÄÂåñÁâàÂâçÁ´ØRAGÊü•ËØ¢Â§±Ë¥•ÔºåÁªßÁª≠‰ΩøÁî®DeepSeek API');\r\n        }\r\n      }\r\n\r\n      // Ë∞ÉÁî®DeepSeek API\r\n      const response = await axios.post('/v1/chat/completions', {\r\n        model: 'deepseek-chat',\r\n        messages: [\r\n          {\r\n            role: 'system',\r\n            content: `${SYSTEM_PROMPT}${ragContext}`\r\n          },\r\n          {\r\n            role: 'user',\r\n            content: userMessage\r\n          }\r\n        ],\r\n        max_tokens: 1000,\r\n        temperature: 0.7\r\n      }, {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer sk-7f5214ed15764dfea0b45c84c6d0c961'\r\n        }\r\n      });\r\n\r\n      const assistantMessage = response.data.choices[0].message.content;\r\n      setMessages(prev => [...prev, { role: 'assistant', content: assistantMessage }]);\r\n\r\n    } catch (error) {\r\n      console.error('APIË∞ÉÁî®Â§±Ë¥•:', error);\r\n      setMessages(prev => [...prev, { \r\n        role: 'assistant', \r\n        content: 'Êä±Ê≠âÔºåÊàëÈÅáÂà∞‰∫Ü‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇËØ∑Á®çÂêéÂÜçËØï„ÄÇ' \r\n      }]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEmojiClick = (emojiObject) => {\r\n    setInputMessage(prev => prev + emojiObject.emoji);\r\n  };\r\n\r\n  const getRagStatusText = () => {\r\n    switch (ragStatus) {\r\n      case 'initializing':\r\n        return 'üîÑ ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÂàùÂßãÂåñ‰∏≠...';\r\n      case 'ready':\r\n        return `‚úÖ ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÂ∑≤Â∞±Áª™ (${ragDetails.documentCount} ‰∏™ÊñáÊ°£)`;\r\n      case 'error':\r\n        return `‚ùå ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÂàùÂßãÂåñÂ§±Ë¥• (${ragDetails.documentCount} ‰∏™ÊñáÊ°£)`;\r\n      default:\r\n        return '‚è≥ ÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÁä∂ÊÄÅÊú™Áü•';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen bg-gray-50\">\r\n      {/* Â§¥ÈÉ® */}\r\n      <div className=\"bg-white shadow-sm border-b px-6 py-4\">\r\n        <h1 className=\"text-xl font-semibold text-gray-800\">AIÊô∫ËÉΩÂí®ËØ¢Âä©Êâã</h1>\r\n        <p className=\"text-sm text-gray-600 mt-1\">Âü∫‰∫éÁÆÄÂåñÁâàÂâçÁ´ØRAGÁ≥ªÁªüÁöÑÊô∫ËÉΩÂØπËØù</p>\r\n        <div className=\"mt-2 text-xs text-gray-500\">\r\n          {getRagStatusText()}\r\n        </div>\r\n        {ragDetails.documentCount > 0 && (\r\n          <div className=\"mt-1 text-xs text-green-600\">\r\n            üìö Áü•ËØÜÂ∫ìÂ∑≤Âä†ËΩΩÔºåÂåÖÂê´ {ragDetails.documentCount} Êù°‰∏ì‰∏öÁü•ËØÜ\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Ê∂àÊÅØÂå∫Âüü */}\r\n      <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\r\n        {messages.length === 0 && (\r\n          <div className=\"text-center text-gray-500 mt-20\">\r\n            <div className=\"text-6xl mb-4\">ü§ñ</div>\r\n            <p className=\"text-lg\">Ê¨¢Ëøé‰ΩøÁî®AIÊô∫ËÉΩÂí®ËØ¢Âä©ÊâãÔºÅ</p>\r\n            <p className=\"text-sm mt-2\">ÊàëÂèØ‰ª•‰∏∫ÊÇ®Êèê‰æõÂ≠¶‰π†ÂíåÁîüÊ¥ªÊñπÈù¢ÁöÑÂª∫ËÆÆ</p>\r\n            {ragStatus === 'ready' && (\r\n              <div className=\"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg\">\r\n                <p className=\"text-sm text-green-700\">\r\n                  ‚úÖ RAGÁ≥ªÁªüÂ∑≤Â∞±Áª™ÔºåÂèØ‰ª•‰∏∫ÊÇ®Êèê‰æõ‰∏ì‰∏öÁöÑÁü•ËØÜÂ∫ìÊîØÊåÅ\r\n                </p>\r\n              </div>\r\n            )}\r\n            {ragStatus === 'error' && (\r\n              <div className=\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n                <p className=\"text-sm text-yellow-700\">\r\n                  ‚ö†Ô∏è RAGÁ≥ªÁªüÂàùÂßãÂåñÂ§±Ë¥•ÔºåÂ∞Ü‰ΩøÁî®Âü∫Á°ÄÊ®°ÂºèÂõûÁ≠î\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        \r\n        {messages.map((message, index) => (\r\n          <div\r\n            key={index}\r\n            className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\r\n          >\r\n            <div\r\n              className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${\r\n                message.role === 'user'\r\n                  ? 'bg-blue-500 text-white'\r\n                  : 'bg-white text-gray-800 shadow-sm border'\r\n              }`}\r\n            >\r\n              <ReactMarkdown\r\n                rehypePlugins={[rehypeRaw]}\r\n                className=\"prose prose-sm max-w-none\"\r\n              >\r\n                {message.content}\r\n              </ReactMarkdown>\r\n            </div>\r\n          </div>\r\n        ))}\r\n        \r\n        {isLoading && (\r\n          <div className=\"flex justify-start\">\r\n            <div className=\"bg-white text-gray-800 shadow-sm border px-4 py-2 rounded-lg\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500\"></div>\r\n                <span className=\"text-sm\">Ê≠£Âú®ÊÄùËÄÉ...</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* ËæìÂÖ•Âå∫Âüü */}\r\n      <div className=\"bg-white border-t p-4\">\r\n        <form onSubmit={handleSubmit} className=\"flex items-center space-x-2\">\r\n          <div className=\"relative flex-1\">\r\n            <input\r\n              type=\"text\"\r\n              value={inputMessage}\r\n              onChange={(e) => setInputMessage(e.target.value)}\r\n              placeholder=\"ËæìÂÖ•ÊÇ®ÁöÑÈóÆÈ¢ò...\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              disabled={isLoading}\r\n            />\r\n            {showEmojiPicker && (\r\n              <div className=\"absolute bottom-full right-0 mb-2\">\r\n                <EmojiPicker onEmojiClick={handleEmojiClick} />\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setShowEmojiPicker(!showEmojiPicker)}\r\n            className=\"p-2 text-gray-500 hover:text-gray-700\"\r\n          >\r\n            üòä\r\n          </button>\r\n          \r\n          <button\r\n            type=\"submit\"\r\n            disabled={!inputMessage.trim() || isLoading}\r\n            className=\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            ÂèëÈÄÅ\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FrontendRAGChat; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}