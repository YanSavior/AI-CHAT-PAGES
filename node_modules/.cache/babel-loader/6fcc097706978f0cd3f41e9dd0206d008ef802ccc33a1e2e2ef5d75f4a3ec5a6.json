{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projectsss\\\\ai-chat-app1.0 - test - \\u526F\\u672C\\\\src\\\\components\\\\ChatInterface.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport axios from 'axios';\nimport ReactMarkdown from 'react-markdown';\nimport rehypeRaw from 'rehype-raw';\nimport EmojiPicker from 'emoji-picker-react';\nimport { graduateData } from '../data/graduateData';\nimport pyfaData from '../data/pyfaData.json';\nimport pyfaData1 from '../data/pyfaData-1.json';\nimport AIAvatar from './AIAvatar';\n\n// 创建一个配置了基础 URL 的 axios 实例\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst api = axios.create({\n  baseURL: 'https://api.deepseek.com',\n  headers: {\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer sk-7f5214ed15764dfea0b45c84c6d0c961'\n  }\n});\n\n// 辅助函数：根据用户输入内容智能匹配专业\nfunction extractMajorFromText(text) {\n  const majors = [{\n    name: '微电子科学与工程',\n    keywords: ['微电子', '集成电路']\n  }, {\n    name: '机械设计制造及其自动化',\n    keywords: ['机械', '自动化', '机电']\n  }\n  // 可继续扩展\n  ];\n  for (const major of majors) {\n    for (const kw of major.keywords) {\n      if (text.includes(kw)) return major.name;\n    }\n  }\n  return null;\n}\nconst getPyfaTextByMajor = major => {\n  if (major === '微电子科学与工程') return pyfaData.join('\\n');\n  if (major === '机械设计制造及其自动化') return pyfaData1.join('\\n');\n  return '';\n};\nconst SYSTEM_PROMPT = `你是一位温暖贴心的职业规划顾问。无论是首次建议还是后续所有回答，你都必须严格参考我提供的\"培养方案\"内容，不能脱离培养方案随意生成建议。每一条建议都要能在培养方案中找到依据。\n\n根据用户是否是首次对话，你需要采用不同的回复方式：\n\n1. 如果这是用户的第一条完整信息（包含学院里的哪个专业、学习阶段、成绩、兴趣等），请按以下方式回复：\n   a) 首先表达理解和认同，肯定用户已经做出的努力\n   b) 从毕业生数据中选择2-3位最匹配的学长学姐，用自然的语言描述他们的经历：\n      - 开头说明匹配度：\"你与[姓名]学长/学姐匹配度较高。\"\n      - 用一段话描述该学长/学姐的情况（绩点、毕业去向、薪资、在校经历）\n      - 特别说明为什么与用户匹配（找到共同点或互补点）\n   c) 最后给出详细的建议，要包含具体的时间节点和行动步骤，一定注意建议需要根据我提供给你的培养方案！并在回复末尾生成一段横向的技能树，要求技能树图示富有生气，且上面不同位置有着不同的时间，根据培养方案有着不同的技能或课程，可以尽量详尽一点\n\n\n2. 如果是用户后续的问题或困惑：\n   a) 首先表达理解和共情，安抚用户的焦虑\n   b) 从已分享的学长学姐经历中提取相关的经验和建议\n   c) 用温暖鼓励的语气给出建议，多分享成功案例\n   d) 如果用户表达压力或焦虑，要着重进行心理疏导\n\n注意事项：\n1. 所有建议必须基于真实的毕业生数据和专业培养方案内容，且每一条建议都要能在培养方案中找到依据。\n2. 语气要温暖、专业、鼓励\n3. 回复要自然流畅，避免生硬的格式\n4. 适时给予情感支持和鼓励\n5. 建议要具体可执行\n6. 注意：请不要用mermaid、gantt、markdown代码块等格式输出技能树或时间轴，只需用自然语言描述，技能树图形由前端负责渲染。`;\n\n// 过滤AI回复中的mermaid/gantt代码块\nfunction filterMermaidGantt(text) {\n  if (!text) return text;\n  // 匹配```gantt ...```或```mermaid ...```代码块\n  return text.replace(/```(gantt|mermaid)[\\s\\S]*?```/gi, '').replace(/gantt\\s+title[\\s\\S]*?(section|$)/gi, '');\n}\nconst ChatInterface = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isFirstMessage, setIsFirstMessage] = useState(true);\n  const [lastUserMajor, setLastUserMajor] = useState(null); // 记录上一次识别的专业\n  const [copiedIndex, setCopiedIndex] = useState(null);\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [isAIAvatarReplying, setIsAIAvatarReplying] = useState(false);\n  const messagesEndRef = useRef(null);\n  const chatContainerRef = useRef(null);\n  const emojiPickerRef = useRef(null);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // 处理点击表情外部关闭表情选择器\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (emojiPickerRef.current && !emojiPickerRef.current.contains(event.target)) {\n        setShowEmojiPicker(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  // 复制文本功能\n  const copyToClipboard = (text, index) => {\n    navigator.clipboard.writeText(text).then(() => {\n      setCopiedIndex(index);\n      setTimeout(() => setCopiedIndex(null), 2000);\n    });\n  };\n  const formatTime = () => {\n    const now = new Date();\n    return `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;\n  };\n  const handleEmojiClick = emojiData => {\n    setInputMessage(prev => prev + emojiData.emoji);\n    setShowEmojiPicker(false);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!inputMessage.trim() || isLoading) return;\n    const userMessage = {\n      id: Date.now(),\n      text: inputMessage,\n      sender: 'user',\n      time: formatTime()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInputMessage('');\n    setIsLoading(true);\n    setError(null);\n\n    // 智能提取专业\n    const userMajor = extractMajorFromText(inputMessage) || lastUserMajor;\n    const pyfaText = userMajor ? getPyfaTextByMajor(userMajor) : '';\n    if (!lastUserMajor && userMajor) setLastUserMajor(userMajor);\n    try {\n      const response = await api.post('/v1/chat/completions', {\n        model: 'deepseek-chat',\n        messages: [{\n          role: 'system',\n          content: `${SYSTEM_PROMPT}\\n\\n可用的毕业生数据如下：${JSON.stringify(graduateData, null, 2)}\\n\\n${userMajor ? `该用户专业为：${userMajor}，以下是该专业的培养方案内容：\\n${pyfaText}` : ''}`\n        }, ...messages.map(msg => ({\n          role: msg.sender === 'user' ? 'user' : 'assistant',\n          content: msg.text\n        })), {\n          role: 'user',\n          content: inputMessage\n        }],\n        temperature: 0.7,\n        max_tokens: 3000,\n        top_p: 0.9,\n        frequency_penalty: 0.3,\n        presence_penalty: 0.3\n      });\n      if (response.data && response.data.choices && response.data.choices[0]) {\n        const aiMessage = {\n          id: Date.now() + 1,\n          text: response.data.choices[0].message.content,\n          sender: 'ai',\n          time: formatTime()\n        };\n\n        // 触发AI智能体的恍然大悟状态\n        setIsAIAvatarReplying(true);\n        setMessages(prev => {\n          const aiText = filterMermaidGantt(aiMessage.text || '').trim();\n          if (!aiText) return prev; // 内容为空则不插入\n          return [...prev, {\n            ...aiMessage,\n            text: aiText\n          }];\n        });\n        if (isFirstMessage) {\n          setIsFirstMessage(false);\n        }\n      } else {\n        throw new Error('无效的 API 响应格式');\n      }\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response$data$;\n      console.error('Error:', error);\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : (_error$response$data$ = _error$response$data.error) === null || _error$response$data$ === void 0 ? void 0 : _error$response$data$.message) || error.message || '抱歉，发生了一些错误。请确保已配置正确的 API 密钥。');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-[calc(100vh-12rem)] bg-white rounded-xl shadow-soft border border-gray-100 qq-style-chat\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: chatContainerRef,\n      className: \"flex-1 overflow-y-auto p-4 space-y-6 qq-style-message-area\",\n      children: [messages.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-2xl mx-auto animate-fade-in\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/80 backdrop-blur-sm rounded-2xl border p-5 shadow-soft transform transition-all duration-300 hover:shadow-lg border-gray-100\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col items-center mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-7 h-7 rounded-full bg-gradient-to-br from-cqupt-blue-400 to-cqupt-blue-600 flex items-center justify-center text-white shadow-sm mb-2 text-xs font-medium\",\n              children: \"AI\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"title-box py-2 px-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-bold text-gradient\",\n                children: \"\\u6B22\\u8FCE\\u4F7F\\u7528 \\u91CD\\u90AE AI \\u52A9\\u624B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-secondary-500 mt-1 text-sm\",\n                children: \"\\u667A\\u6167\\u6821\\u56ED\\uFF0C\\u4E3A\\u60A8\\u670D\\u52A1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"prompt-box mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"prompt-box-title text-sm font-medium\",\n              children: \"\\u8BF7\\u5206\\u4EAB\\u4E00\\u4E0B\\u4F60\\u7684\\u60C5\\u51B5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"max-w-md mx-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-1.5 text-secondary-600 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2.5 hover:text-cqupt-blue-600 transition-colors duration-200 group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"w-4 h-4 rounded-full bg-secondary-200 flex items-center justify-center text-xs group-hover:bg-cqupt-blue-100 group-hover:text-cqupt-blue-700 transition-colors duration-200\",\n                    children: \"1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \".\\u76EE\\u524D\\u7684\\u5B66\\u4E60\\u9636\\u6BB5\\uFF08\\u5927\\u51E0\\uFF09\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2.5 hover:text-cqupt-blue-600 transition-colors duration-200 group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"w-4 h-4 rounded-full bg-secondary-200 flex items-center justify-center text-xs group-hover:bg-cqupt-blue-100 group-hover:text-cqupt-blue-700 transition-colors duration-200\",\n                    children: \"2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \".\\u4E3B\\u8981\\u8BFE\\u7A0B\\u7684\\u6210\\u7EE9\\u60C5\\u51B5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2.5 hover:text-cqupt-blue-600 transition-colors duration-200 group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"w-4 h-4 rounded-full bg-secondary-200 flex items-center justify-center text-xs group-hover:bg-cqupt-blue-100 group-hover:text-cqupt-blue-700 transition-colors duration-200\",\n                    children: \"3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \".\\u611F\\u5174\\u8DA3\\u7684\\u4E13\\u4E1A\\u9886\\u57DF\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2.5 hover:text-cqupt-blue-600 transition-colors duration-200 group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"w-4 h-4 rounded-full bg-secondary-200 flex items-center justify-center text-xs group-hover:bg-cqupt-blue-100 group-hover:text-cqupt-blue-700 transition-colors duration-200\",\n                    children: \"4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \".\\u5DF2\\u7ECF\\u505A\\u8FC7\\u7684\\u51C6\\u5907\\uFF08\\u5982\\u679C\\u6709\\uFF09\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2.5 hover:text-cqupt-blue-600 transition-colors duration-200 group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"w-4 h-4 rounded-full bg-secondary-200 flex items-center justify-center text-xs group-hover:bg-cqupt-blue-100 group-hover:text-cqupt-blue-700 transition-colors duration-200\",\n                    children: \"5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \".\\u76EE\\u524D\\u6700\\u5927\\u7684\\u56F0\\u60D1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"title-box mt-3 max-w-xs mx-auto py-1 px-3\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-secondary-500\",\n              children: \"\\u6211\\u4EEC\\u5C06\\u4E3A\\u60A8\\u63D0\\u4F9B\\u4E2A\\u6027\\u5316\\u7684\\u5B66\\u4E60\\u89C4\\u5212\\u4E0E\\u804C\\u4E1A\\u53D1\\u5C55\\u5EFA\\u8BAE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }, this), messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `chat-message ${message.sender === 'user' ? 'chat-message-user' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `chat-avatar ${message.sender === 'user' ? 'chat-avatar-user' : 'chat-avatar-ai'}`,\n          children: message.sender === 'user' ? '我' : 'AI'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-message-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: message.sender === 'user' ? 'chat-bubble-user' : 'chat-bubble-ai',\n            children: message.sender === 'ai' ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"prose prose-sm max-w-none\",\n              children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                rehypePlugins: [rehypeRaw],\n                components: {\n                  p: ({\n                    node,\n                    ...props\n                  }) => /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"whitespace-pre-wrap text-sm sm:text-base\",\n                    ...props\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 288,\n                    columnNumber: 50\n                  }, this)\n                },\n                children: message.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"whitespace-pre-wrap text-sm sm:text-base\",\n              children: message.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-message-time\",\n            children: [message.time, message.sender === 'ai' && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => copyToClipboard(message.text, index),\n              className: \"copy-button\",\n              title: \"\\u590D\\u5236\\u5185\\u5BB9\",\n              children: copiedIndex === index ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"flex items-center text-xs text-primary-600\",\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-3 h-3 mr-1\",\n                  fill: \"currentColor\",\n                  viewBox: \"0 0 20 20\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    fillRule: \"evenodd\",\n                    d: \"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\",\n                    clipRule: \"evenodd\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 25\n                }, this), \"\\u5DF2\\u590D\\u5236\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-3 h-3 mr-1\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: \"2\",\n                    d: \"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 25\n                }, this), \"\\u590D\\u5236\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this)]\n      }, message.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }, this)), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-start animate-fade-in\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-end space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-6 h-6 rounded-full bg-gradient-to-br from-cqupt-blue-400 to-cqupt-blue-600 flex items-center justify-center text-white text-xs shadow-sm\",\n            children: \"AI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative rounded-lg px-4 py-3 shadow-sm border bg-white border-gray-200 max-w-md\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative z-10 flex items-center space-x-2 mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-2 h-2 bg-cqupt-blue-400 rounded-full animate-bounce\",\n                  style: {\n                    animationDelay: '0ms'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-2 h-2 bg-cqupt-blue-500 rounded-full animate-bounce\",\n                  style: {\n                    animationDelay: '150ms'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-2 h-2 bg-cqupt-blue-600 rounded-full animate-bounce\",\n                  style: {\n                    animationDelay: '300ms'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500 animate-pulse\",\n                children: \"AI\\u6B63\\u5728\\u601D\\u8003\\u4E2D...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 bg-gradient-to-r from-transparent via-blue-50/30 to-transparent animate-pulse-slow rounded-lg\",\n              style: {\n                backgroundSize: '200% 100%',\n                animation: 'gradientShift 2s ease infinite'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center animate-shake\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rounded-lg px-3 py-2 max-w-[80%] text-xs shadow-sm border bg-red-50 text-red-500 border-red-200 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4 mr-1 flex-shrink-0\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 20 20\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this), error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-t input-area\",\n      style: {\n        paddingLeft: '250px',\n        paddingRight: '20px',\n        paddingBottom: '30px',\n        paddingTop: '30px',\n        position: 'relative'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"flex flex-col space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(AIAvatar, {\n            isThinking: isLoading,\n            isReplying: isAIAvatarReplying\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: inputMessage,\n            onChange: e => setInputMessage(e.target.value),\n            onKeyDown: e => {\n              if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                handleSubmit(e);\n              }\n            },\n            placeholder: \"\\u8F93\\u5165\\u6D88\\u606F...\",\n            className: \"w-full rounded-xl text-secondary-800 resize-none min-h-[100px]\",\n            disabled: isLoading,\n            style: {\n              marginTop: '10px',\n              border: '1px solid #e5e7eb',\n              backgroundColor: '#ffffff',\n              boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',\n              outline: 'none',\n              transition: 'border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute bottom-3 right-3 flex space-x-2\",\n            style: {\n              zIndex: 10\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: isLoading || !inputMessage.trim(),\n              className: `send-button ${isLoading || !inputMessage.trim() ? 'opacity-50 cursor-not-allowed' : 'hover:shadow-md'}`,\n              children: isLoading ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"animate-spin h-5 w-5\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                  className: \"opacity-25\",\n                  cx: \"12\",\n                  cy: \"12\",\n                  r: \"10\",\n                  stroke: \"currentColor\",\n                  strokeWidth: \"4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  className: \"opacity-75\",\n                  fill: \"currentColor\",\n                  d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 402,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"flex items-center\",\n                children: [\"\\u53D1\\u9001\", /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-4 h-4 ml-1\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: \"2\",\n                    d: \"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 408,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-toolbar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"input-toolbar-button flex items-center\",\n              title: \"\\u8868\\u60C5\",\n              onClick: () => setShowEmojiPicker(!showEmojiPicker),\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-5 h-5 mr-1\",\n                fill: \"currentColor\",\n                viewBox: \"0 0 20 20\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  fillRule: \"evenodd\",\n                  d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-7.536 5.879a1 1 0 001.415 0 3 3 0 014.242 0 1 1 0 001.415-1.415 5 5 0 00-7.072 0 1 1 0 000 1.415z\",\n                  clipRule: \"evenodd\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 17\n              }, this), \"\\u8868\\u60C5\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-secondary-400 ml-auto\",\n            children: inputMessage.length > 0 ? `${inputMessage.length}字` : '按Enter发送，Shift+Enter换行'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this), showEmojiPicker && /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: emojiPickerRef,\n          className: \"emoji-picker-container\",\n          style: {\n            bottom: '80px',\n            left: '10px'\n          },\n          children: /*#__PURE__*/_jsxDEV(EmojiPicker, {\n            onEmojiClick: handleEmojiClick,\n            searchDisabled: true,\n            width: 300,\n            height: 350,\n            previewConfig: {\n              showPreview: false\n            },\n            skinTonesDisabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatInterface, \"BgBxEsSVFn21Beb0yZ86XNIg2pk=\");\n_c = ChatInterface;\nexport default ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","ReactMarkdown","rehypeRaw","EmojiPicker","graduateData","pyfaData","pyfaData1","AIAvatar","jsxDEV","_jsxDEV","api","create","baseURL","headers","extractMajorFromText","text","majors","name","keywords","major","kw","includes","getPyfaTextByMajor","join","SYSTEM_PROMPT","filterMermaidGantt","replace","ChatInterface","_s","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","error","setError","isFirstMessage","setIsFirstMessage","lastUserMajor","setLastUserMajor","copiedIndex","setCopiedIndex","showEmojiPicker","setShowEmojiPicker","isAIAvatarReplying","setIsAIAvatarReplying","messagesEndRef","chatContainerRef","emojiPickerRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleClickOutside","event","contains","target","document","addEventListener","removeEventListener","copyToClipboard","index","navigator","clipboard","writeText","then","setTimeout","formatTime","now","Date","getHours","toString","padStart","getMinutes","handleEmojiClick","emojiData","prev","emoji","handleSubmit","e","preventDefault","trim","userMessage","id","sender","time","userMajor","pyfaText","response","post","model","role","content","JSON","stringify","map","msg","temperature","max_tokens","top_p","frequency_penalty","presence_penalty","data","choices","aiMessage","message","aiText","Error","_error$response","_error$response$data","_error$response$data$","console","className","children","ref","length","fileName","_jsxFileName","lineNumber","columnNumber","rehypePlugins","components","p","node","props","onClick","title","fill","viewBox","xmlns","fillRule","d","clipRule","stroke","strokeLinecap","strokeLinejoin","strokeWidth","style","animationDelay","backgroundSize","animation","paddingLeft","paddingRight","paddingBottom","paddingTop","position","onSubmit","isThinking","isReplying","value","onChange","onKeyDown","key","shiftKey","placeholder","disabled","marginTop","border","backgroundColor","boxShadow","outline","transition","zIndex","type","cx","cy","r","bottom","left","onEmojiClick","searchDisabled","width","height","previewConfig","showPreview","skinTonesDisabled","_c","$RefreshReg$"],"sources":["D:/Projectsss/ai-chat-app1.0 - test - 副本/src/components/ChatInterface.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport rehypeRaw from 'rehype-raw';\r\nimport EmojiPicker from 'emoji-picker-react';\r\nimport { graduateData } from '../data/graduateData';\r\nimport pyfaData from '../data/pyfaData.json';\r\nimport pyfaData1 from '../data/pyfaData-1.json';\r\nimport AIAvatar from './AIAvatar';\r\n\r\n// 创建一个配置了基础 URL 的 axios 实例\r\nconst api = axios.create({\r\n  baseURL: 'https://api.deepseek.com',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'Authorization': 'Bearer sk-7f5214ed15764dfea0b45c84c6d0c961'\r\n  }\r\n});\r\n\r\n// 辅助函数：根据用户输入内容智能匹配专业\r\nfunction extractMajorFromText(text) {\r\n  const majors = [\r\n    { name: '微电子科学与工程', keywords: ['微电子', '集成电路'] },\r\n    { name: '机械设计制造及其自动化', keywords: ['机械', '自动化', '机电'] },\r\n    // 可继续扩展\r\n  ];\r\n  for (const major of majors) {\r\n    for (const kw of major.keywords) {\r\n      if (text.includes(kw)) return major.name;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nconst getPyfaTextByMajor = (major) => {\r\n  if (major === '微电子科学与工程') return pyfaData.join('\\n');\r\n  if (major === '机械设计制造及其自动化') return pyfaData1.join('\\n');\r\n  return '';\r\n};\r\n\r\nconst SYSTEM_PROMPT = `你是一位温暖贴心的职业规划顾问。无论是首次建议还是后续所有回答，你都必须严格参考我提供的\"培养方案\"内容，不能脱离培养方案随意生成建议。每一条建议都要能在培养方案中找到依据。\r\n\r\n根据用户是否是首次对话，你需要采用不同的回复方式：\r\n\r\n1. 如果这是用户的第一条完整信息（包含学院里的哪个专业、学习阶段、成绩、兴趣等），请按以下方式回复：\r\n   a) 首先表达理解和认同，肯定用户已经做出的努力\r\n   b) 从毕业生数据中选择2-3位最匹配的学长学姐，用自然的语言描述他们的经历：\r\n      - 开头说明匹配度：\"你与[姓名]学长/学姐匹配度较高。\"\r\n      - 用一段话描述该学长/学姐的情况（绩点、毕业去向、薪资、在校经历）\r\n      - 特别说明为什么与用户匹配（找到共同点或互补点）\r\n   c) 最后给出详细的建议，要包含具体的时间节点和行动步骤，一定注意建议需要根据我提供给你的培养方案！并在回复末尾生成一段横向的技能树，要求技能树图示富有生气，且上面不同位置有着不同的时间，根据培养方案有着不同的技能或课程，可以尽量详尽一点\r\n\r\n\r\n2. 如果是用户后续的问题或困惑：\r\n   a) 首先表达理解和共情，安抚用户的焦虑\r\n   b) 从已分享的学长学姐经历中提取相关的经验和建议\r\n   c) 用温暖鼓励的语气给出建议，多分享成功案例\r\n   d) 如果用户表达压力或焦虑，要着重进行心理疏导\r\n\r\n注意事项：\r\n1. 所有建议必须基于真实的毕业生数据和专业培养方案内容，且每一条建议都要能在培养方案中找到依据。\r\n2. 语气要温暖、专业、鼓励\r\n3. 回复要自然流畅，避免生硬的格式\r\n4. 适时给予情感支持和鼓励\r\n5. 建议要具体可执行\r\n6. 注意：请不要用mermaid、gantt、markdown代码块等格式输出技能树或时间轴，只需用自然语言描述，技能树图形由前端负责渲染。`;\r\n\r\n// 过滤AI回复中的mermaid/gantt代码块\r\nfunction filterMermaidGantt(text) {\r\n  if (!text) return text;\r\n  // 匹配```gantt ...```或```mermaid ...```代码块\r\n  return text.replace(/```(gantt|mermaid)[\\s\\S]*?```/gi, '')\r\n             .replace(/gantt\\s+title[\\s\\S]*?(section|$)/gi, '');\r\n}\r\n\r\nconst ChatInterface = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [isFirstMessage, setIsFirstMessage] = useState(true);\r\n  const [lastUserMajor, setLastUserMajor] = useState(null); // 记录上一次识别的专业\r\n  const [copiedIndex, setCopiedIndex] = useState(null);\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n  const [isAIAvatarReplying, setIsAIAvatarReplying] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n  const chatContainerRef = useRef(null);\r\n  const emojiPickerRef = useRef(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // 处理点击表情外部关闭表情选择器\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (emojiPickerRef.current && !emojiPickerRef.current.contains(event.target)) {\r\n        setShowEmojiPicker(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  // 复制文本功能\r\n  const copyToClipboard = (text, index) => {\r\n    navigator.clipboard.writeText(text).then(() => {\r\n      setCopiedIndex(index);\r\n      setTimeout(() => setCopiedIndex(null), 2000);\r\n    });\r\n  };\r\n\r\n  const formatTime = () => {\r\n    const now = new Date();\r\n    return `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const handleEmojiClick = (emojiData) => {\r\n    setInputMessage(prev => prev + emojiData.emoji);\r\n    setShowEmojiPicker(false);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!inputMessage.trim() || isLoading) return;\r\n\r\n    const userMessage = {\r\n      id: Date.now(),\r\n      text: inputMessage,\r\n      sender: 'user',\r\n      time: formatTime()\r\n    };\r\n\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInputMessage('');\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    // 智能提取专业\r\n    const userMajor = extractMajorFromText(inputMessage) || lastUserMajor;\r\n    const pyfaText = userMajor ? getPyfaTextByMajor(userMajor) : '';\r\n    if (!lastUserMajor && userMajor) setLastUserMajor(userMajor);\r\n\r\n    try {\r\n      const response = await api.post('/v1/chat/completions', {\r\n        model: 'deepseek-chat',\r\n        messages: [\r\n          {\r\n            role: 'system',\r\n            content: `${SYSTEM_PROMPT}\\n\\n可用的毕业生数据如下：${JSON.stringify(graduateData, null, 2)}\\n\\n${userMajor ? `该用户专业为：${userMajor}，以下是该专业的培养方案内容：\\n${pyfaText}` : ''}`\r\n          },\r\n          ...messages.map(msg => ({\r\n            role: msg.sender === 'user' ? 'user' : 'assistant',\r\n            content: msg.text\r\n          })),\r\n          {\r\n            role: 'user',\r\n            content: inputMessage\r\n          }\r\n        ],\r\n        temperature: 0.7,\r\n        max_tokens: 3000,\r\n        top_p: 0.9,\r\n        frequency_penalty: 0.3,\r\n        presence_penalty: 0.3\r\n      });\r\n\r\n      if (response.data && response.data.choices && response.data.choices[0]) {\r\n        const aiMessage = {\r\n          id: Date.now() + 1,\r\n          text: response.data.choices[0].message.content,\r\n          sender: 'ai',\r\n          time: formatTime()\r\n        };\r\n        \r\n        // 触发AI智能体的恍然大悟状态\r\n        setIsAIAvatarReplying(true);\r\n        \r\n        setMessages(prev => {\r\n          const aiText = filterMermaidGantt(aiMessage.text || '').trim();\r\n          if (!aiText) return prev; // 内容为空则不插入\r\n          return [...prev, { ...aiMessage, text: aiText }];\r\n        });\r\n        if (isFirstMessage) {\r\n          setIsFirstMessage(false);\r\n        }\r\n      } else {\r\n        throw new Error('无效的 API 响应格式');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setError(\r\n        error.response?.data?.error?.message || \r\n        error.message || \r\n        '抱歉，发生了一些错误。请确保已配置正确的 API 密钥。'\r\n      );\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-[calc(100vh-12rem)] bg-white rounded-xl shadow-soft border border-gray-100 qq-style-chat\">\r\n      <div \r\n        ref={chatContainerRef}\r\n        className=\"flex-1 overflow-y-auto p-4 space-y-6 qq-style-message-area\"\r\n      >\r\n        {messages.length === 0 && (\r\n          <div className=\"w-full max-w-2xl mx-auto animate-fade-in\">\r\n            <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl border p-5 shadow-soft transform transition-all duration-300 hover:shadow-lg border-gray-100\">\r\n              <div className=\"flex flex-col items-center mb-6\">\r\n                <div className=\"w-7 h-7 rounded-full bg-gradient-to-br from-cqupt-blue-400 to-cqupt-blue-600 flex items-center justify-center text-white shadow-sm mb-2 text-xs font-medium\">\r\n                  AI\r\n                </div>\r\n                <div className=\"title-box py-2 px-4\">\r\n                  <h3 className=\"text-xl font-bold text-gradient\">\r\n                    欢迎使用 重邮 AI 助手\r\n                  </h3>\r\n                  <p className=\"text-secondary-500 mt-1 text-sm\">\r\n                    智慧校园，为您服务\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"prompt-box mb-4\">\r\n                <h4 className=\"prompt-box-title text-sm font-medium\">\r\n                  请分享一下你的情况\r\n                </h4>\r\n                <div className=\"max-w-md mx-auto\">\r\n                  <div className=\"space-y-1.5 text-secondary-600 text-sm\">\r\n                    <div className=\"flex items-center space-x-2.5 hover:text-cqupt-blue-600 transition-colors duration-200 group\">\r\n                      <span className=\"w-4 h-4 rounded-full bg-secondary-200 flex items-center justify-center text-xs group-hover:bg-cqupt-blue-100 group-hover:text-cqupt-blue-700 transition-colors duration-200\">1</span>\r\n                      <span>.目前的学习阶段（大几）</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2.5 hover:text-cqupt-blue-600 transition-colors duration-200 group\">\r\n                      <span className=\"w-4 h-4 rounded-full bg-secondary-200 flex items-center justify-center text-xs group-hover:bg-cqupt-blue-100 group-hover:text-cqupt-blue-700 transition-colors duration-200\">2</span>\r\n                      <span>.主要课程的成绩情况</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2.5 hover:text-cqupt-blue-600 transition-colors duration-200 group\">\r\n                      <span className=\"w-4 h-4 rounded-full bg-secondary-200 flex items-center justify-center text-xs group-hover:bg-cqupt-blue-100 group-hover:text-cqupt-blue-700 transition-colors duration-200\">3</span>\r\n                      <span>.感兴趣的专业领域</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2.5 hover:text-cqupt-blue-600 transition-colors duration-200 group\">\r\n                      <span className=\"w-4 h-4 rounded-full bg-secondary-200 flex items-center justify-center text-xs group-hover:bg-cqupt-blue-100 group-hover:text-cqupt-blue-700 transition-colors duration-200\">4</span>\r\n                      <span>.已经做过的准备（如果有）</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2.5 hover:text-cqupt-blue-600 transition-colors duration-200 group\">\r\n                      <span className=\"w-4 h-4 rounded-full bg-secondary-200 flex items-center justify-center text-xs group-hover:bg-cqupt-blue-100 group-hover:text-cqupt-blue-700 transition-colors duration-200\">5</span>\r\n                      <span>.目前最大的困惑</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"title-box mt-3 max-w-xs mx-auto py-1 px-3\">\r\n                <p className=\"text-xs text-secondary-500\">\r\n                  我们将为您提供个性化的学习规划与职业发展建议\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {messages.map((message, index) => (\r\n          <div\r\n            key={message.id}\r\n            className={`chat-message ${\r\n              message.sender === 'user' ? 'chat-message-user' : ''\r\n            }`}\r\n          >\r\n            <div className={`chat-avatar ${message.sender === 'user' ? 'chat-avatar-user' : 'chat-avatar-ai'}`}>\r\n              {message.sender === 'user' ? '我' : 'AI'}\r\n            </div>\r\n            <div className=\"chat-message-content\">\r\n              <div className={message.sender === 'user' ? 'chat-bubble-user' : 'chat-bubble-ai'}>\r\n                {message.sender === 'ai' ? (\r\n                  <div className=\"prose prose-sm max-w-none\">\r\n                    <ReactMarkdown \r\n                      rehypePlugins={[rehypeRaw]}\r\n                      components={{\r\n                        p: ({node, ...props}) => <p className=\"whitespace-pre-wrap text-sm sm:text-base\" {...props} />\r\n                      }}\r\n                    >\r\n                      {message.text}\r\n                    </ReactMarkdown>\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"whitespace-pre-wrap text-sm sm:text-base\">{message.text}</p>\r\n                )}\r\n              </div>\r\n              <div className=\"chat-message-time\">\r\n                {message.time}\r\n                {message.sender === 'ai' && (\r\n                  <button \r\n                    onClick={() => copyToClipboard(message.text, index)}\r\n                    className=\"copy-button\"\r\n                    title=\"复制内容\"\r\n                  >\r\n                    {copiedIndex === index ? (\r\n                      <span className=\"flex items-center text-xs text-primary-600\">\r\n                        <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                          <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\"></path>\r\n                        </svg>\r\n                        已复制\r\n                      </span>\r\n                    ) : (\r\n                      <span className=\"flex items-center\">\r\n                        <svg className=\"w-3 h-3 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3\"></path>\r\n                        </svg>\r\n                        复制\r\n                      </span>\r\n                    )}\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        {isLoading && (\r\n          <div className=\"flex justify-start animate-fade-in\">\r\n            <div className=\"flex items-end space-x-2\">\r\n              <div className=\"w-6 h-6 rounded-full bg-gradient-to-br from-cqupt-blue-400 to-cqupt-blue-600 flex items-center justify-center text-white text-xs shadow-sm\">\r\n                AI\r\n              </div>\r\n              <div className=\"relative rounded-lg px-4 py-3 shadow-sm border bg-white border-gray-200 max-w-md\">\r\n                <div className=\"flex flex-col items-center\">\r\n                  <div className=\"relative z-10 flex items-center space-x-2 mb-2\">\r\n                    <div className=\"w-2 h-2 bg-cqupt-blue-400 rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\r\n                    <div className=\"w-2 h-2 bg-cqupt-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\r\n                    <div className=\"w-2 h-2 bg-cqupt-blue-600 rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-500 animate-pulse\">AI正在思考中...</div>\r\n                </div>\r\n                <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-blue-50/30 to-transparent animate-pulse-slow rounded-lg\" style={{ backgroundSize: '200% 100%', animation: 'gradientShift 2s ease infinite' }}></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {error && (\r\n          <div className=\"flex justify-center animate-shake\">\r\n            <div className=\"rounded-lg px-3 py-2 max-w-[80%] text-xs shadow-sm border bg-red-50 text-red-500 border-red-200 flex items-center\">\r\n              <svg className=\"w-4 h-4 mr-1 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\"></path>\r\n              </svg>\r\n              {error}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n      <div className=\"border-t input-area\" style={{ paddingLeft: '250px', paddingRight: '20px', paddingBottom: '30px', paddingTop: '30px', position: 'relative' }}>\r\n        <form onSubmit={handleSubmit} className=\"flex flex-col space-y-2\">\r\n          <div className=\"relative\">\r\n            {/* AI智能体 */}\r\n            <AIAvatar isThinking={isLoading} isReplying={isAIAvatarReplying} />\r\n            \r\n            <textarea\r\n              value={inputMessage}\r\n              onChange={(e) => setInputMessage(e.target.value)}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter' && !e.shiftKey) {\r\n                  e.preventDefault();\r\n                  handleSubmit(e);\r\n                }\r\n              }}\r\n              placeholder=\"输入消息...\"\r\n              className=\"w-full rounded-xl text-secondary-800 resize-none min-h-[100px]\"\r\n              disabled={isLoading}\r\n              style={{ \r\n                marginTop: '10px',\r\n                border: '1px solid #e5e7eb',\r\n                backgroundColor: '#ffffff',\r\n                boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',\r\n                outline: 'none',\r\n                transition: 'border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out'\r\n              }}\r\n            />\r\n            <div className=\"absolute bottom-3 right-3 flex space-x-2\" style={{ zIndex: 10 }}>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoading || !inputMessage.trim()}\r\n                className={`send-button ${\r\n                  isLoading || !inputMessage.trim() \r\n                    ? 'opacity-50 cursor-not-allowed' \r\n                    : 'hover:shadow-md'\r\n                }`}\r\n              >\r\n                {isLoading ? (\r\n                  <svg className=\"animate-spin h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                  </svg>\r\n                ) : (\r\n                  <span className=\"flex items-center\">\r\n                    发送\r\n                    <svg className=\"w-4 h-4 ml-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"></path>\r\n                    </svg>\r\n                  </span>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"input-toolbar\">\r\n            <div className=\"flex\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"input-toolbar-button flex items-center\"\r\n                title=\"表情\"\r\n                onClick={() => setShowEmojiPicker(!showEmojiPicker)}\r\n              >\r\n                <svg className=\"w-5 h-5 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-7.536 5.879a1 1 0 001.415 0 3 3 0 014.242 0 1 1 0 001.415-1.415 5 5 0 00-7.072 0 1 1 0 000 1.415z\" clipRule=\"evenodd\"></path>\r\n                </svg>\r\n                表情\r\n              </button>\r\n            </div>\r\n            <div className=\"text-xs text-secondary-400 ml-auto\">\r\n              {inputMessage.length > 0 ? `${inputMessage.length}字` : '按Enter发送，Shift+Enter换行'}\r\n            </div>\r\n          </div>\r\n          \r\n          {showEmojiPicker && (\r\n            <div \r\n              ref={emojiPickerRef} \r\n              className=\"emoji-picker-container\"\r\n              style={{ bottom: '80px', left: '10px' }}\r\n            >\r\n              <EmojiPicker \r\n                onEmojiClick={handleEmojiClick} \r\n                searchDisabled={true}\r\n                width={300}\r\n                height={350}\r\n                previewConfig={{ showPreview: false }}\r\n                skinTonesDisabled={true}\r\n              />\r\n            </div>\r\n          )}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatInterface; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}