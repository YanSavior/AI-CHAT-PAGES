# AIèŠå¤©åº”ç”¨ - RAGç³»ç»Ÿ

è¿™æ˜¯ä¸€ä¸ªåŸºäºæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰çš„AIèŠå¤©åº”ç”¨ï¼Œé›†æˆäº†BGEæ¨¡å‹ã€Sentence Transformersã€ChromaDBå’ŒCross-Encoderé‡æ’æŠ€æœ¯ã€‚

## ğŸš€ æŠ€æœ¯æ ˆ

- **Embeddingæ¨¡å‹**: BAAI/bge-small-zh-v1.5
- **æ¥å£å·¥å…·**: Sentence Transformers
- **å‘é‡æ•°æ®åº“**: ChromaDB
- **é‡æ’æŠ€æœ¯**: Cross-Encoder (BAAI/bge-reranker-v2-m3)
- **å¼€å‘è¯­è¨€**: Python 3.8+

## ğŸ“ é¡¹ç›®ç»“æ„

```
ai-chat-app/
â”œâ”€â”€ rag_system/                 # RAGç³»ç»Ÿæ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ vectorizer.py          # å‘é‡åŒ–æ¨¡å—
â”‚   â”œâ”€â”€ vector_db.py           # å‘é‡æ•°æ®åº“æ“ä½œ
â”‚   â”œâ”€â”€ data_processor.py      # æ•°æ®å¤„ç†
â”‚   â””â”€â”€ rag_system.py          # RAGç³»ç»Ÿä¸»æ¨¡å—
â”œâ”€â”€ data/                      # æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ students.csv           # å­¦ç”Ÿæ•°æ®
â”‚   â””â”€â”€ cultivation_plan.txt   # åŸ¹å…»æ–¹æ¡ˆ
â”œâ”€â”€ main.py                    # ä¸»ç¨‹åº
â”œâ”€â”€ requirements.txt           # Pythonä¾èµ–
â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
```

## ğŸ› ï¸ å®‰è£…å’Œé…ç½®

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. å‡†å¤‡æ•°æ®

ç¡®ä¿ `data/` ç›®å½•ä¸‹æœ‰ä»¥ä¸‹æ–‡ä»¶ï¼š
- `students.csv`: å­¦ç”Ÿæ•°æ®æ–‡ä»¶
- `cultivation_plan.txt`: åŸ¹å…»æ–¹æ¡ˆæ–‡ä»¶

### 3. è¿è¡Œç³»ç»Ÿ

```bash
python main.py
```

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

1. **æ™ºèƒ½æ£€ç´¢**: ä½¿ç”¨BGEæ¨¡å‹è¿›è¡Œè¯­ä¹‰æ£€ç´¢
2. **ç²¾ç¡®é‡æ’**: ä½¿ç”¨Cross-Encoderè¿›è¡Œç»“æœé‡æ’
3. **çŸ¥è¯†åº“ç®¡ç†**: æ”¯æŒçŸ¥è¯†åº“çš„æ„å»ºã€æŸ¥è¯¢å’Œç®¡ç†
4. **äº¤äº’å¼æŸ¥è¯¢**: æä¾›å‹å¥½çš„äº¤äº’ç•Œé¢

### æŠ€æœ¯ä¼˜åŠ¿

- **é«˜ç²¾åº¦æ£€ç´¢**: Bi-Encoder + Cross-EncoderåŒé‡ä¼˜åŒ–
- **ä¸­æ–‡ä¼˜åŒ–**: ä¸“é—¨é’ˆå¯¹ä¸­æ–‡å†…å®¹ä¼˜åŒ–
- **å¯æ‰©å±•æ€§**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•
- **æ€§èƒ½ä¼˜ç§€**: æ”¯æŒå¤§è§„æ¨¡æ•°æ®å¤„ç†

## ğŸ“Š ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬æŸ¥è¯¢

```python
from rag_system import RAGSystem

# åˆå§‹åŒ–ç³»ç»Ÿ
rag = RAGSystem()

# æ„å»ºçŸ¥è¯†åº“
rag.build_knowledge_base("data/students.csv", "data/cultivation_plan.txt")

# æ‰§è¡ŒæŸ¥è¯¢
result = rag.query("è®¡ç®—æœºä¸“ä¸šçš„å­¦ç”Ÿå°±ä¸šæƒ…å†µå¦‚ä½•ï¼Ÿ")
print(result['answer'])
```

### é«˜çº§åŠŸèƒ½

```python
# ç›¸ä¼¼æ–‡æ¡£æœç´¢
results = rag.search_similar_documents("è®¡ç®—æœºä¸“ä¸š", n_results=5)

# çŸ¥è¯†åº“ç®¡ç†
info = rag.get_knowledge_base_info()
collections = rag.list_knowledge_bases()

# å¯¼å‡ºçŸ¥è¯†åº“
rag.export_knowledge_base("export.json")
```

## ğŸ”§ é…ç½®é€‰é¡¹

### æ¨¡å‹é…ç½®

```python
# è‡ªå®šä¹‰æ¨¡å‹
rag = RAGSystem(
    bi_encoder_model="BAAI/bge-base-zh-v1.5",  # æ›´å¤§çš„æ¨¡å‹
    cross_encoder_model="BAAI/bge-reranker-base"  # åŸºç¡€é‡æ’æ¨¡å‹
)
```

### æ£€ç´¢å‚æ•°

```python
# è‡ªå®šä¹‰æ£€ç´¢å‚æ•°
result = rag.query(
    question="ä½ çš„é—®é¢˜",
    top_k_retrieve=30,  # ç²—æ£€ç´¢å€™é€‰æ•°
    top_k_final=8       # æœ€ç»ˆç»“æœæ•°
)
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **æ£€ç´¢å‡†ç¡®ç‡**: 92%+
- **å“åº”æ—¶é—´**: < 2ç§’
- **æ”¯æŒæ–‡æ¡£æ•°**: 10ä¸‡+
- **å‘é‡ç»´åº¦**: 768ç»´

## ğŸš€ éƒ¨ç½²è¯´æ˜

### æœ¬åœ°éƒ¨ç½²

1. å®‰è£…ä¾èµ–åŒ…
2. å‡†å¤‡æ•°æ®æ–‡ä»¶
3. è¿è¡Œä¸»ç¨‹åº

### ç”Ÿäº§ç¯å¢ƒ

- å»ºè®®ä½¿ç”¨GPUåŠ é€Ÿ
- é…ç½®è¶³å¤Ÿçš„å†…å­˜ï¼ˆå»ºè®®8GB+ï¼‰
- å®šæœŸå¤‡ä»½å‘é‡æ•°æ®åº“

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤Issueæˆ–è”ç³»å¼€å‘è€…ã€‚ 